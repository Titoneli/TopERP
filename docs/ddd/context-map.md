# TopERP CRM - Context Map (DDD)

| Metadado | Valor |
|----------|-------|
| **VersÃ£o** | 2.0 |
| **Data** | 22/01/2026 |
| **Autor** | Product Owner |
| **Status** | Aprovado |
| **Metodologia** | Domain-Driven Design |

---

## 1. VisÃ£o Geral

Este documento define o **Context Map** do sistema TopERP CRM, identificando os Bounded Contexts, seus relacionamentos e padrÃµes de integraÃ§Ã£o seguindo os princÃ­pios de Domain-Driven Design (DDD).

---

## 2. Diagrama do Context Map

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              TOPIERP CRM - CONTEXT MAP                          â”‚
â”‚                                    VersÃ£o 2.0                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                            â”‚
â”‚  â”‚   AUTENTICAÃ‡ÃƒO  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚    (Generic)    â”‚                                                       â”‚    â”‚
â”‚  â”‚   CRM-AUT       â”‚                                                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                       â”‚    â”‚
â”‚           â”‚ JWT Token                                                      â”‚    â”‚
â”‚           â–¼                                                                â”‚    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     U/D      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚    â”‚
â”‚  â”‚   CADASTROS     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚     LEADS       â”‚                      â”‚    â”‚
â”‚  â”‚   BÃSICOS       â”‚              â”‚     (Core)      â”‚                      â”‚    â”‚
â”‚  â”‚  (Supporting)   â”‚              â”‚   CRM-LED       â”‚                      â”‚    â”‚
â”‚  â”‚   CRM-CAD       â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚                               â”‚    â”‚
â”‚         â”‚                                  â”‚ Lead ID (SK)                  â”‚    â”‚
â”‚         â”‚ FIPE                             â–¼                               â”‚    â”‚
â”‚         â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚    â”‚
â”‚         â”‚                         â”‚    COTAÃ‡Ã•ES     â”‚                      â”‚    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚     (Core)      â”‚                      â”‚    â”‚
â”‚  â”‚   API FIPE      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   CRM-COT       â”‚                      â”‚    â”‚
â”‚  â”‚   (External)    â”‚   ACL        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚                               â”‚    â”‚
â”‚                                            â”‚ CotaÃ§Ã£o ID                    â”‚    â”‚
â”‚                                            â–¼                               â”‚    â”‚
â”‚                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚    â”‚
â”‚                               â”‚   FUNIL DE LEADS    â”‚                      â”‚    â”‚
â”‚                               â”‚      (Core)         â”‚                      â”‚    â”‚
â”‚                               â”‚    CRM-FUN          â”‚                      â”‚    â”‚
â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚    â”‚
â”‚                                        â”‚                                   â”‚    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚          FLUXO SEQUENCIAL DO FUNIL (State Machine)                  â”‚   â”‚    â”‚
â”‚  â”‚                                     â”‚                               â”‚   â”‚    â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚    â”‚
â”‚  â”‚    â”‚                                                             â”‚  â”‚   â”‚    â”‚
â”‚  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚   â”‚    â”‚
â”‚  â”‚    â”‚  â”‚PROPOSTAS â”‚â”€â”€â”€â–ºâ”‚PAGAMENTOSâ”‚â”€â”€â”€â–ºâ”‚VISTORIAS â”‚â”€â”€â”€â–ºâ”‚ANÃLISE â”‚â”‚  â”‚   â”‚    â”‚
â”‚  â”‚    â”‚  â”‚ CRM-PRO  â”‚    â”‚ CRM-PAG  â”‚    â”‚ CRM-VIS  â”‚    â”‚CRM-ANA â”‚â”‚  â”‚   â”‚    â”‚
â”‚  â”‚    â”‚  â”‚  (Core)  â”‚    â”‚  (Core)  â”‚    â”‚  (Core)  â”‚    â”‚ (Core) â”‚â”‚  â”‚   â”‚    â”‚
â”‚  â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜â”‚  â”‚   â”‚    â”‚
â”‚  â”‚    â”‚                       â”‚                              â”‚     â”‚  â”‚   â”‚    â”‚
â”‚  â”‚    â”‚                       â”‚                              â–¼     â”‚  â”‚   â”‚    â”‚
â”‚  â”‚    â”‚                       â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚   â”‚    â”‚
â”‚  â”‚    â”‚                       â”‚                     â”‚CONCRETIZADA â”‚â”‚  â”‚   â”‚    â”‚
â”‚  â”‚    â”‚                       â”‚                     â”‚  (Outcome)  â”‚â”‚  â”‚   â”‚    â”‚
â”‚  â”‚    â”‚                       â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚   â”‚    â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚    â”‚
â”‚  â”‚                            â”‚                                        â”‚   â”‚    â”‚
â”‚  â”‚                            â”‚ IntegraÃ§Ã£o                             â”‚   â”‚    â”‚
â”‚  â”‚                            â–¼                                        â”‚   â”‚    â”‚
â”‚  â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚   â”‚    â”‚
â”‚  â”‚              â”‚     BANCO DIGITAL       â”‚                            â”‚   â”‚    â”‚
â”‚  â”‚              â”‚      (External)         â”‚                            â”‚   â”‚    â”‚
â”‚  â”‚              â”‚    PIX / Boleto         â”‚                            â”‚   â”‚    â”‚
â”‚  â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚                                                                            â”‚    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚                      CONTEXTOS DE SUPORTE                             â”‚ â”‚    â”‚
â”‚  â”‚                                                                       â”‚ â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚ â”‚    â”‚
â”‚  â”‚  â”‚   TAREFAS &   â”‚  â”‚COMISSIONAMENTOâ”‚  â”‚ APP CONSULTOR â”‚             â”‚ â”‚    â”‚
â”‚  â”‚  â”‚   AGENDAS     â”‚  â”‚ & REMUNERAÃ‡ÃƒO â”‚  â”‚   (Mobile)    â”‚             â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  CRM-TAR      â”‚  â”‚   CRM-COM     â”‚  â”‚   CRM-APP     â”‚             â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ (Supporting)  â”‚  â”‚ (Supporting)  â”‚  â”‚ (Supporting)  â”‚             â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚ â”‚    â”‚
â”‚  â”‚                                                                       â”‚ â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  FOLLOW-UP    â”‚  â”‚  ASSINATURA   â”‚  â”‚   PÃ“S-VENDA   â”‚             â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  & CAPTAÃ‡ÃƒO   â”‚  â”‚   DIGITAL     â”‚  â”‚               â”‚             â”‚ â”‚    â”‚
â”‚  â”‚  â”‚   CRM-CAP     â”‚  â”‚   CRM-ASS     â”‚  â”‚   CRM-POS     â”‚             â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ (Supporting)  â”‚  â”‚ (Supporting)  â”‚  â”‚ (Supporting)  â”‚             â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚ â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚                                                                            â”‚    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚                    CONTEXTOS DE LEITURA (CQRS)                        â”‚ â”‚    â”‚
â”‚  â”‚                                                                       â”‚ â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚ â”‚    â”‚
â”‚  â”‚  â”‚   DASHBOARD   â”‚  â”‚  RELATÃ“RIOS   â”‚  â”‚   AUDITORIA   â”‚             â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  (Read-Only)  â”‚  â”‚   & KPIs      â”‚  â”‚   (Logging)   â”‚             â”‚ â”‚    â”‚
â”‚  â”‚  â”‚   CRM-DAS     â”‚  â”‚   CRM-REL     â”‚  â”‚   CRM-AUD     â”‚             â”‚ â”‚    â”‚
â”‚  â”‚  â”‚    CQRS       â”‚  â”‚    CQRS       â”‚  â”‚   (Generic)   â”‚             â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚ â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚                                                                            â”‚    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    SHARED KERNEL - BANCO PostgreSQL                     â”‚    â”‚
â”‚  â”‚                                                                         â”‚    â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚    â”‚
â”‚  â”‚   â”‚ COR_PESSOA  â”‚    â”‚ COR_CLIENTE â”‚    â”‚ COR_VEICULO â”‚                â”‚    â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚    â”‚
â”‚  â”‚                                                                         â”‚    â”‚
â”‚  â”‚   Compartilhado entre CRM e TopERP Core                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    INTEGRAÃ‡ÃƒO LEGACY - SGA                              â”‚    â”‚
â”‚  â”‚                                                                         â”‚    â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚   â”‚                    ANTI-CORRUPTION LAYER                        â”‚  â”‚    â”‚
â”‚  â”‚   â”‚                    (Adapter Pattern)                            â”‚  â”‚    â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â”‚                              â”‚                                         â”‚    â”‚
â”‚  â”‚                              â–¼                                         â”‚    â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚   â”‚                    SISTEMA SGA (Legacy)                         â”‚  â”‚    â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Bounded Contexts

### 3.1 Tabela de Bounded Contexts

| CÃ³digo | Bounded Context | Tipo | Responsabilidade | Status |
|--------|-----------------|------|------------------|--------|
| CRM-AUT | AutenticaÃ§Ã£o | Generic | Login, JWT, permissÃµes | âœ… Documentado |
| CRM-CAD | Cadastros BÃ¡sicos | Supporting | CRUD Planos, ServiÃ§os, Tabelas, FIPE | ğŸ“‹ Planejado |
| CRM-LED | Leads | Core | CaptaÃ§Ã£o e gestÃ£o de leads/prospects | âœ… Documentado |
| CRM-COT | CotaÃ§Ãµes | Core | SimulaÃ§Ã£o e cÃ¡lculo de preÃ§os | âš ï¸ Parcial |
| CRM-FUN | Funil de Leads | Core | GestÃ£o de pipeline e conversÃ£o | âš ï¸ Parcial |
| CRM-PRO | Propostas | Core | GeraÃ§Ã£o e envio de propostas | ğŸ“‹ Planejado |
| CRM-PAG | Pagamentos | Core | PIX, boleto, integraÃ§Ã£o bancÃ¡ria | ğŸ“‹ Planejado |
| CRM-VIS | Vistorias | Core | Agendamento e execuÃ§Ã£o de vistorias | ğŸ“‹ Planejado |
| CRM-ANA | AnÃ¡lise | Core | AnÃ¡lise documental e aprovaÃ§Ã£o | ğŸ“‹ Planejado |
| CRM-TAR | Tarefas & Agendas | Supporting | GestÃ£o de atividades e calendÃ¡rio | ğŸ“‹ Planejado |
| CRM-COM | Comissionamento | Supporting | CÃ¡lculo de comissÃµes e remuneraÃ§Ã£o | ğŸ“‹ Planejado |
| CRM-APP | App Consultor | Supporting | Aplicativo mobile para consultores | ğŸ“‹ Planejado |
| CRM-CAP | CaptaÃ§Ã£o & Follow-Up | Supporting | Multicanal e acompanhamento | ğŸ“‹ Planejado |
| CRM-ASS | Assinatura Digital | Supporting | Assinatura eletrÃ´nica de contratos | ğŸ“‹ Planejado |
| CRM-POS | PÃ³s-Venda | Supporting | Acompanhamento pÃ³s-conversÃ£o | ğŸ“‹ Planejado |
| CRM-DAS | Dashboard | CQRS Read | VisualizaÃ§Ã£o consolidada de dados | ğŸ“‹ Planejado |
| CRM-REL | RelatÃ³rios | CQRS Read | GeraÃ§Ã£o de relatÃ³rios e KPIs | ğŸ“‹ Planejado |
| CRM-AUD | Auditoria | Generic | Log de aÃ§Ãµes e rastreabilidade | ğŸ“‹ Planejado |

### 3.2 Legenda de Status

- âœ… **Documentado**: User Stories e especificaÃ§Ãµes completas
- âš ï¸ **Parcial**: DocumentaÃ§Ã£o iniciada, em desenvolvimento
- ğŸ“‹ **Planejado**: Identificado no roadmap, aguardando documentaÃ§Ã£o

---

## 4. Relacionamentos entre Contextos

### 4.1 PadrÃµes de IntegraÃ§Ã£o

| Contexto Upstream | Contexto Downstream | PadrÃ£o | DescriÃ§Ã£o |
|-------------------|---------------------|--------|-----------|
| CRM-AUT | Todos | Published Language | JWT Token compartilhado |
| CRM-LED | CRM-COT | Customer/Supplier | Lead ID como referÃªncia |
| CRM-COT | CRM-FUN | Customer/Supplier | CotaÃ§Ã£o vinculada ao funil |
| CRM-FUN | CRM-PRO | State Machine | TransiÃ§Ã£o de estado |
| CRM-PRO | CRM-PAG | State Machine | Proposta aceita â†’ Pagamento |
| CRM-PAG | CRM-VIS | State Machine | Pagamento confirmado â†’ Vistoria |
| CRM-VIS | CRM-ANA | State Machine | Vistoria realizada â†’ AnÃ¡lise |
| CRM-CAD | CRM-COT | Upstream/Downstream | Dados de preÃ§os e planos |
| CRM-* | CRM-DAS | CQRS | Read Model agregado |
| CRM-* | CRM-REL | CQRS | Read Model para relatÃ³rios |
| CRM-* | CRM-AUD | Event Sourcing | Eventos de domÃ­nio |
| API FIPE | CRM-CAD | ACL | Anti-Corruption Layer |
| Banco Digital | CRM-PAG | ACL | Anti-Corruption Layer |
| SGA | CRM-* | ACL | Anti-Corruption Layer |

### 4.2 Shared Kernel

O CRM e o TopERP Core compartilham o mesmo banco de dados PostgreSQL com as seguintes tabelas principais:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SHARED KERNEL                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ COR_PESSOA  â”‚â”€â”€â”€â”€â–ºâ”‚ COR_CLIENTE â”‚â”€â”€â”€â”€â–ºâ”‚ COR_VEICULO â”‚       â”‚
â”‚  â”‚             â”‚     â”‚             â”‚     â”‚             â”‚       â”‚
â”‚  â”‚ - ID        â”‚     â”‚ - ID        â”‚     â”‚ - ID        â”‚       â”‚
â”‚  â”‚ - Nome      â”‚     â”‚ - Pessoa_ID â”‚     â”‚ - Cliente_IDâ”‚       â”‚
â”‚  â”‚ - CPF/CNPJ  â”‚     â”‚ - Tipo      â”‚     â”‚ - Placa     â”‚       â”‚
â”‚  â”‚ - Contato   â”‚     â”‚ - Status    â”‚     â”‚ - FIPE      â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                 â”‚
â”‚  Regras:                                                        â”‚
â”‚  â€¢ Lead = Prospect (mesmo conceito, ID compartilhado)           â”‚
â”‚  â€¢ Entidade Ãºnica COR_PESSOA para ambos os sistemas            â”‚
â”‚  â€¢ SincronizaÃ§Ã£o em tempo real via triggers/eventos            â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Fluxo do Funil de Vendas

### 5.1 State Machine do Funil

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        FUNIL DE VENDAS - STATE MACHINE                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  [LEAD CAPTADO]                                                              â”‚
â”‚        â”‚                                                                     â”‚
â”‚        â–¼                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   criar    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   aceitar   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  LEADS   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ COTAÃ‡ÃƒO  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ PROPOSTA â”‚              â”‚
â”‚  â”‚ CRM-LED  â”‚            â”‚ CRM-COT  â”‚             â”‚ CRM-PRO  â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                recusar                 â”‚                     â”‚
â”‚                                   â”‚                    â”‚ enviar              â”‚
â”‚                                   â–¼                    â–¼                     â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚                          â”‚    PERDIDO   â”‚      â”‚PAGAMENTO â”‚                 â”‚
â”‚                          â”‚   (Outcome)  â”‚      â”‚ CRM-PAG  â”‚                 â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                     â”‚                        â”‚
â”‚                                                     â”‚ confirmar              â”‚
â”‚                                                     â–¼                        â”‚
â”‚                                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚                                               â”‚ VISTORIA â”‚                   â”‚
â”‚                                               â”‚ CRM-VIS  â”‚                   â”‚
â”‚                                               â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                    â”‚                         â”‚
â”‚                                                    â”‚ realizar                â”‚
â”‚                                                    â–¼                         â”‚
â”‚                                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚                                               â”‚ ANÃLISE  â”‚                   â”‚
â”‚                                               â”‚ CRM-ANA  â”‚                   â”‚
â”‚                                               â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                    â”‚                         â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                              â”‚                     â”‚                     â”‚   â”‚
â”‚                              â–¼                     â–¼                     â–¼   â”‚
â”‚                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚                       â”‚ APROVADO â”‚          â”‚ PENDÃŠNCIAâ”‚          â”‚REPROVADOâ”‚
â”‚                       â”‚(Concretiz)â”‚          â”‚(CorreÃ§Ã£o)â”‚          â”‚(Perdido)â”‚
â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 Eventos de DomÃ­nio do Funil

| Evento | Contexto Origem | Contextos Interessados |
|--------|-----------------|------------------------|
| `LeadCaptado` | CRM-LED | CRM-DAS, CRM-AUD, CRM-TAR |
| `CotacaoCriada` | CRM-COT | CRM-LED, CRM-DAS, CRM-AUD |
| `PropostaEnviada` | CRM-PRO | CRM-LED, CRM-PAG, CRM-AUD |
| `PagamentoConfirmado` | CRM-PAG | CRM-VIS, CRM-COM, CRM-AUD |
| `VistoriaRealizada` | CRM-VIS | CRM-ANA, CRM-DAS, CRM-AUD |
| `AnaliseAprovada` | CRM-ANA | CRM-POS, CRM-COM, CRM-AUD |
| `NegociacaoConcretizada` | CRM-ANA | CRM-POS, CRM-DAS, CRM-REL |
| `NegociacaoPerdida` | CRM-* | CRM-DAS, CRM-REL, CRM-AUD |

---

## 6. Canais de CaptaÃ§Ã£o (Multicanal)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CAPTAÃ‡ÃƒO MULTICANAL                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚WhatsApp â”‚ â”‚  Site   â”‚ â”‚Facebook â”‚ â”‚Instagramâ”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜               â”‚
â”‚       â”‚           â”‚           â”‚           â”‚                     â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                         â”‚                                       â”‚
â”‚                         â–¼                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚IndicaÃ§Ã£oâ”‚â”€â”¤      API DE CAPTAÃ‡ÃƒO        â”œâ”€â”‚  Evento â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚       (CRM-CAP)             â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Landing â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚Telefone â”‚       â”‚
â”‚  â”‚  Page   â”‚                                 â”‚         â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                             â”‚                                   â”‚
â”‚                             â–¼                                   â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚                   â”‚   CRM-LEADS     â”‚                           â”‚
â”‚                   â”‚   (Unificado)   â”‚                           â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. IntegraÃ§Ãµes Externas

### 7.1 Anti-Corruption Layers

| Sistema Externo | ACL | Responsabilidade |
|-----------------|-----|------------------|
| **API FIPE** | FipeAdapter | Consulta de valores de veÃ­culos |
| **Banco Digital** | BancoDigitalAdapter | PIX, boleto, confirmaÃ§Ã£o |
| **SGA (Legacy)** | SGAAdapter | SincronizaÃ§Ã£o de dados legados |
| **WhatsApp API** | WhatsAppAdapter | Envio de mensagens e captaÃ§Ã£o |
| **Email Service** | EmailAdapter | NotificaÃ§Ãµes e envio de propostas |
| **VistorIA** | VistoriaAdapter | IntegraÃ§Ã£o com App VistorIA |
| **N8N (AutomaÃ§Ã£o)** | AutomacaoAdapter | Workflows e integraÃ§Ãµes automatizadas |

### 7.2 Diagrama de IntegraÃ§Ã£o

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    INTEGRAÃ‡Ã•ES EXTERNAS                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   API FIPE      â”‚â—„â”€â”€â”€ACLâ”€â”€â”‚   CRM-CAD       â”‚             â”‚
â”‚  â”‚   (External)    â”‚         â”‚   Cadastros     â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  Banco Digital  â”‚â—„â”€â”€â”€ACLâ”€â”€â”‚   CRM-PAG       â”‚             â”‚
â”‚  â”‚  PIX/Boleto     â”‚         â”‚   Pagamentos    â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  WhatsApp API   â”‚â—„â”€â”€â”€ACLâ”€â”€â”‚   CRM-CAP       â”‚             â”‚
â”‚  â”‚                 â”‚         â”‚   CaptaÃ§Ã£o      â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  Sistema SGA    â”‚â—„â”€â”€â”€ACLâ”€â”€â”‚   CRM-*         â”‚             â”‚
â”‚  â”‚  (Legacy)       â”‚         â”‚   (Todos)       â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. PadrÃµes Arquiteturais

### 8.1 CQRS (Command Query Responsibility Segregation)

Os contextos **CRM-DAS** (Dashboard) e **CRM-REL** (RelatÃ³rios) sÃ£o implementados como **Read Models** usando o padrÃ£o CQRS:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CQRS PATTERN                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚  COMMANDS   â”‚          â”‚   QUERIES   â”‚                  â”‚
â”‚  â”‚  (Write)    â”‚          â”‚   (Read)    â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚         â”‚                        â”‚                          â”‚
â”‚         â–¼                        â–¼                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚   CRM-*     â”‚          â”‚  CRM-DAS    â”‚                  â”‚
â”‚  â”‚ (DomÃ­nios)  â”‚â”€â”€Eventsâ”€â–ºâ”‚  CRM-REL    â”‚                  â”‚
â”‚  â”‚             â”‚          â”‚ (Read-Only) â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚         â”‚                        â”‚                          â”‚
â”‚         â–¼                        â–¼                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚Write Databaseâ”‚          â”‚Read Database â”‚                  â”‚
â”‚  â”‚ (PostgreSQL)â”‚          â”‚(Views/Cache)â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 Event Sourcing (Auditoria)

O contexto **CRM-AUD** utiliza Event Sourcing para manter histÃ³rico completo de aÃ§Ãµes:

- Todos os eventos de domÃ­nio sÃ£o persistidos
- Permite reconstruÃ§Ã£o de estado em qualquer ponto no tempo
- Garante rastreabilidade para compliance

---

## 9. Roadmap de DocumentaÃ§Ã£o

### 9.1 PriorizaÃ§Ã£o por VersÃ£o

| VersÃ£o | Contextos | Data Alvo |
|--------|-----------|-----------|
| v1.0 | CRM-AUT, CRM-LED, CRM-COT, CRM-FUN | Q1/2026 |
| v2.0 | CRM-PRO, CRM-PAG, CRM-VIS, CRM-ANA | Q2/2026 |
| v3.0 | CRM-TAR, CRM-CAP, CRM-ASS, CRM-COM | Q3/2026 |
| v4.0 | CRM-APP, CRM-DAS, CRM-REL, CRM-POS | Q4/2026 |

### 9.2 PrÃ³ximos Passos

1. âœ… Context Map definido e aprovado
2. ğŸ“‹ Detalhar Bounded Context CRM-PAG (Pagamentos)
3. ğŸ“‹ Detalhar Bounded Context CRM-VIS (Vistorias)
4. ğŸ“‹ Detalhar Bounded Context CRM-ANA (AnÃ¡lise)
5. ğŸ“‹ Detalhar Bounded Context CRM-PRO (Propostas)
6. ğŸ“‹ Atualizar READMEs existentes com padrÃ£o DDD
7. ğŸ“‹ Criar User Stories para contextos faltantes

---

## 10. GlossÃ¡rio DDD

| Termo | DefiniÃ§Ã£o |
|-------|-----------|
| **Bounded Context** | Fronteira explÃ­cita onde um modelo de domÃ­nio Ã© definido e aplicÃ¡vel |
| **Aggregate** | Cluster de objetos de domÃ­nio tratados como unidade |
| **Entity** | Objeto com identidade Ãºnica e ciclo de vida |
| **Value Object** | Objeto imutÃ¡vel sem identidade prÃ³pria |
| **Domain Event** | Registro de algo que aconteceu no domÃ­nio |
| **Repository** | AbstraÃ§Ã£o para persistÃªncia de agregados |
| **Shared Kernel** | CÃ³digo/modelo compartilhado entre contextos |
| **ACL** | Anti-Corruption Layer - proteÃ§Ã£o contra modelos externos |
| **CQRS** | SeparaÃ§Ã£o entre comandos (escrita) e consultas (leitura) |
| **Upstream/Downstream** | DireÃ§Ã£o de dependÃªncia entre contextos |

---

## 11. HistÃ³rico de AlteraÃ§Ãµes

| Data | VersÃ£o | Autor | AlteraÃ§Ã£o |
|------|--------|-------|-----------|
| 25/01/2026 | 2.1 | Product Owner | Adicionados ACLs VistorAI e N8N (origem: visao-produto-crm.md) |
| 22/01/2026 | 2.0 | Product Owner | VersÃ£o inicial aprovada com 18 Bounded Contexts |

---

## 12. ReferÃªncias

- [Product Backlog](../backlog/product-backlog.md)
- [Roadmap de Releases](../releases/roadmap.md)
- [GlossÃ¡rio do Sistema](../glossario/glossario.md)
- [VisÃ£o do Produto CRM](../visao-produto-crm.md)
